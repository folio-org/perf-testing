pipeline {
  agent any

  stages {
    stage('Checkout Scm') {
      steps {
        git 'https://github.com/folio-org/perf-testing'
      }
    }

    stage('Build Artifact') {
      steps {
        sh '''cd common/ECSResourcesCheck
mvn clean install
ls -la
pwd
'''
      }}

    stage('Run Artifact') {
      steps {
      sh '''pwd
      cd common/ECSResourcesCheck/target
   java -jar AWSFin-1.0-SNAPSHOT-jar-with-dependencies.jar $Cluster $aws_access_key_id2 $aws_secret_access_key2 $region "$baseJson"
   '''
         }

    }
  }}
   parameters {
      string(name: 'Cluster', defaultValue: 'ncp3-pvt', description: null)
      string(name: 'aws_access_key_id', defaultValue: null, description: null)
      string(name: 'aws_secret_access_key', defaultValue: null, description: null)
      string(name: 'region', defaultValue: 'us-east-1', description: null)
      text(name: 'baseJson', defaultValue: null, description: null)
    }
